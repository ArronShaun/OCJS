<html>
<head><title>JSC Console</title></head>

<body>
<textarea id='io' value='' style='font-family:Consolas;size:12px;color:#000000;background-color:#FFF;position:fixed;width:100%;height:100%;'></textarea>
</body>

<script type='text/javascript'>

var io= document.getElementById('io');
var cmd='';
var last='';
var now='';
var title="localhost#bruce: ";

// write a line
function say(words){
	io.value += title+words+"\n";
}

//print within the current session of interaction 
function print(str)
{
	io.value += str;
}

//clear the screen
function clear(){
	io.value = title;
	last = title;
}

//create a new interactive line
function newLine(){
	io.value += "\n" + title;
	now = last = io.value;
}

// execute a line
function execute(cmd){
	print("\n such command has been executed:"+cmd);	
}

//run command in current line
function run(){
	now=io.value;
	console.log('now:'+now);
	console.log('last:'+last);
	cmd=now.substring(last.length,now.length);	
	execute(cmd);
	newLine();
}

io.onkeypress=function(e){
	var evnt=[];
	if(typeof e == "undefined"){
		evnt = window.event;
	}
	else {
		evnt = e;
	}
	if(evnt.keyCode==13){
		run();
	}
}

function initial(){
	// do some pre-process staff
	clear();
}

initial();

</script>
</html>
